# ~~ Generated by projen. To modify, edit .projenrc.py and run "npx projen".

name: github-release
run-name: Release ${{ github.ref_name }}
on:
  push:
    tags:
      - v*.*.*
jobs:
  publish-to-github-release:
    name: Publish to GitHub Release
    runs-on: ubuntu-latest
    permissions:
      contents: write
    steps:
      - name: Verify if release exists
        id: release-exists
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |-
          if gh release view ${{ github.ref_name }} --repo=${{ github.repository }} &>/dev/null
          then
          echo "result=true" >> $GITHUB_OUTPUT
          else
          echo "result=false" >> $GITHUB_OUTPUT
          fi
      - name: Create Release
        if: "!fromJSON(steps.release-exists.outputs.result)"
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: gh release create ${{ github.ref_name }} --notes-from-tag --title=${{ github.ref_name }} --verify-tag
